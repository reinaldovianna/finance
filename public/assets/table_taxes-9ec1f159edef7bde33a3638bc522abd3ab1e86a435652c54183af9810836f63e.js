$(document).on("click",".add-table-tax-row",function(e){e.preventDefault(),sendLine($(this))}),$(document).on("click",".remove-table-tax-row",function(e){e.preventDefault(),removeLine($(this))}),sendLine=function(e){return validFieldsRulePresent(content_base(e,".form-table-tax"))===!0?(setAlert(content_base(e,".form-table-tax"),".table-tax-alert","danger","Todos os campos do registro devem estar preenchidos."),!1):($data=parseJsonDataSendLine(content_base(e,".form-table-tax")),void $.ajax({type:"POST",url:e.attr("href"),dataType:"json",data:$data}).always(function(t){responseSendLine(content_base(e,".form-table-tax"),t)}))},parseJsonDataSendLine=function(e){return{rows:{row_type:e.find(".row-type").val(),row_name:e.find(".row-name").val(),row_measurement:e.find(".row-measurement").val(),row_value:e.find(".row-value").val()},table:{id:e.find(".table-tax-id").val()}}},validFieldsRulePresent=function(e){return""===e.find(".row-type").val().trim()||""===e.find(".row-name").val().trim()||""===e.find(".row-measurement").val().trim()||""===e.find(".row-value").val().trim()},responseSendLine=function(e,t){switch(t.statusText){case"OK":e.find(".list-tax-rows").prepend(t.responseText),e.find(".table-tax-row").first().fadeOut(150).fadeIn(150).fadeOut(150).fadeIn(150),e.find(".input-row").val(""),e.find(".table-tax-alert").fadeOut();break;case"Conflict":setAlert(e,".table-tax-alert","info","O registro informado j\xe1 se encontra na tabela.");break;case"Internal Server Error":setAlert(e,".table-tax-alert","danger","Erro interno, entre em contato com o suporte t\xe9cnico.");break;default:$message=t.statusText+" : "+t.responseText.substring(0,400),setAlert(e,".table-tax-alert","danger",$message)}},responseRemoveLine=function(e,t){$row_current=e.parents(".table-tax-row"),"OK"===t.statusText?($($row_current).fadeOut("normal",function(){e.remove()}),setAlert(content_base(e,".form-table-tax"),".table-tax-alert","success","Registro removido com sucesso.")):($message="N\xe3o foi poss\xedvel excluir o registro - "+t.responseText.substring(0,400),setAlert(content_base(e,".form-table-tax"),".table-tax-alert","danger",$message))},removeLine=function(e){$data=parseJsonDataRemoveLine(e),$.ajax({type:"POST",url:e.attr("href"),dataType:"json",data:$data}).always(function(t){responseRemoveLine(e,t)})},parseJsonDataRemoveLine=function(e){return{rows:{id:e.data("table-tax-row-id")},table:{id:content_base(e,".form-table-tax").find(".table-tax-id").val()}}},ruleOption=function(e,t){return'<li class="active-result" data-option-array-index="'+e+'">'+t+"</li>"},$(document).on("click",".add-table-tax-rule",function(e){e.preventDefault(),sendLineRule($(this))}),$(document).on("click",".remove-table-tax-rule",function(e){e.preventDefault(),removeLineRule($(this))}),sendLineRule=function(e){return $form_table_tax=e.parents(".form-table-tax"),validFieldsRowPresent($form_table_tax)===!0?(setAlert(content_base(e,".form-table-tax"),".table-tax-rules-alert","danger","Todos os campos do registro devem estar preenchidos."),!1):($data=parseJsonDataSendLineRule($form_table_tax),void $.ajax({type:"POST",url:e.attr("href"),dataType:"json",data:$data}).always(function(e){responseSendLineRule($form_table_tax,e)}))},parseJsonDataSendLineRule=function(e){return{rules:{row_ids:e.find(".rule-row-ids").val(),operator:e.find(".rule-operator").val(),measurement:e.find(".rule-measurement").val(),value:e.find(".rule-value").val()},table:{id:e.find(".table-tax-id").val()}}},validFieldsRowPresent=function(e){return null===e.find(".rule-row-ids").val()||""===e.find(".rule-operator").val().trim()||""===e.find(".rule-measurement").val().trim()||""===e.find(".rule-value").val().trim()},responseSendLineRule=function(e,t){switch($element_alert=e.parent().children(".table-tax-rules-alert"),t.statusText){case"OK":e.find(".list-tax-rules").prepend(t.responseText),$(".table-tax-rule").first().fadeOut(150).fadeIn(150).fadeOut(150).fadeIn(150),$(".input-rule").val(""),e.find(".table-tax-rules-alert").fadeOut();break;case"Conflict":setAlert(content_base(element,".form-table-tax"),".table-tax-rules-alert","info","O registro informado j\xe1 se encontra na tabela.");break;case"Internal Server Error":setAlert(content_base(element,".form-table-tax"),".table-tax-rules-alert","danger","Erro interno, entre em contato com o suporte t\xe9cnico.");break;default:$message=t.statusText+" : "+t.responseText.substring(0,400),setAlert(content_base(element,".form-table-tax"),".table-tax-rules-alert","danger",$message)}},responseRemoveLineRule=function(e,t){$rule_current=e.parents(".table-tax-rule"),"OK"===t.statusText?($($rule_current).fadeOut("normal",function(){e.remove()}),setAlert(content_base(e,".form-table-tax"),".table-tax-rules-alert","success","Registro removido com sucesso.")):($message="N\xe3o foi poss\xedvel excluir o registro - "+t.responseText.substring(0,400),setAlert(content_base(e,".form-table-tax"),".table-tax-rules-alert","danger",$message))},removeLineRule=function(e){$form_table_tax=e.parents(".form-table-tax"),$data=parseJsonDataRemoveLineRule(e),$.ajax({type:"POST",url:e.attr("href"),dataType:"json",data:$data}).always(function(t){responseRemoveLineRule(e,t)})},parseJsonDataRemoveLineRule=function(e){return{rules:{id:e.data("table-tax-rule-id")},table:{id:$form_table_tax.find(".table-tax-id").val()}}};